<?xml version="1.0"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
         width="100%" xmlns:button="com.component.button.*" xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Script>
		<![CDATA[
			import com.mediator.RightViewMediator;
			
			import org.puremvc.as3.patterns.facade.Facade;
			private var _mediator:RightViewMediator;
			
			public function get mediator():RightViewMediator{
				if(!_mediator ){
					if(!Facade.getInstance().hasMediator(RightViewMediator.RIGHT_VIEW_MEDIATOR))
						Facade.getInstance().registerMediator(new RightViewMediator(this));
					_mediator =  Facade.getInstance().retrieveMediator(RightViewMediator.RIGHT_VIEW_MEDIATOR) as RightViewMediator;
				}
				return _mediator;
			}
			protected function chatTab_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				this.currentState = "chat";
			}
			
			protected function memberTab_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				this.currentState = "member";
			}
			
			
		]]>
	</fx:Script>
	<s:states>
		<s:State name="chat"/>
		<s:State name="member"/>
	</s:states>
	<!--header-->
	<s:Group width="100%" height="50">
		<s:Rect left="0" top="0" width="100%" height="100%">
			<s:fill>
				<s:SolidColor color="#999999"/>
			</s:fill>
		</s:Rect>
		<s:HGroup horizontalAlign="right" width="100%" height="100%">
			<button:IconButton width="75" height="100%" id="chatTab"
							   imgSource="@Embed('/assets/chat.png')" bSelected="true"
							   skinClass="com.skin.IconButtonSkin" 
							   click="chatTab_clickHandler(event)"/>
			<button:IconButton width="75" height="100%" id="memberTab"
							   imgSource="@Embed('/assets/person.png')"
							   skinClass="com.skin.IconButtonSkin"
							   click="memberTab_clickHandler(event)"/>
		</s:HGroup>
	</s:Group>
	<!--chat-->
	<s:Group width="100%" height="100%" includeIn="chat"  >
		<s:List  width="100%" height="100%" borderVisible="false"
				 itemRenderer="com.component.itemrenders.ChatItemRender"
				 dataProvider="{mediator.messageProvider}">
			<s:layout>
				<s:VerticalLayout variableRowHeight="true"/>
			</s:layout>
		</s:List>
	</s:Group>
	<!--member list-->
	<s:Group width="100%" height="100%" includeIn="member" >
		<s:List  width="100%" height="100%" borderVisible="false">
			
		</s:List>
	</s:Group>
	<!--booter-->
	<mx:HRule width="100%"/>
	<s:Group width="100%" height="110">
		<s:TextArea id="msgInput" left="0" right="0" top="0" bottom="0" focusThickness="0"
					borderVisible="false" contentBackgroundAlpha="0"
					focusIn="{IME.enabled=true;}" verticalScrollPolicy="off">
			<s:keyFocusChange>
				event.preventDefault();
				event.currentTarget.insertText("    ");
			</s:keyFocusChange>
		</s:TextArea>
	</s:Group>
</s:VGroup>
